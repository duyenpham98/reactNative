var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getCalendar=getCalendar;exports.getCountry=getCountry;exports.getCurrencies=getCurrencies;exports.getLocales=getLocales;exports.getNumberFormatSettings=getNumberFormatSettings;exports.getTemperatureUnit=getTemperatureUnit;exports.getTimeZone=getTimeZone;exports.uses24HourClock=uses24HourClock;exports.usesMetricSystem=usesMetricSystem;exports.usesAutoDateAndTime=usesAutoDateAndTime;exports.usesAutoTimeZone=usesAutoTimeZone;exports.handlers=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _constants=require("./constants");var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);function ensureCountryCode(countryCode){return countryCode==="419"?"UN":countryCode.toUpperCase();}function splitLanguageTag(languageTag){var _languageTag$split=languageTag.split("-"),_languageTag$split2=(0,_slicedToArray2.default)(_languageTag$split,2),languageCode=_languageTag$split2[0],countryCode=_languageTag$split2[1];return{languageCode:languageCode,countryCode:countryCode};}function convertLanguageTagToLocale(languageTag,countryCodeFallback){var _splitLanguageTag=splitLanguageTag(languageTag),languageCode=_splitLanguageTag.languageCode,countryCode=_splitLanguageTag.countryCode;languageCode=languageCode.toLowerCase();countryCode=ensureCountryCode(countryCode||countryCodeFallback);return{languageCode:languageCode,countryCode:countryCode,languageTag:languageCode+"-"+countryCode,isRTL:_constants.USES_RTL_LAYOUT.includes(languageCode)};}function getCurrentLocale(){return convertLanguageTagToLocale(navigator.language,getCountry());}function getCalendar(){return"gregorian";}function getCountry(){var _navigator=navigator,languages=_navigator.languages;for(var i=0;i<languages.length;i++){var _splitLanguageTag2=splitLanguageTag(languages[i]),countryCode=_splitLanguageTag2.countryCode;if(countryCode){return ensureCountryCode(countryCode);}}return"US";}function getCurrencies(){var _navigator2=navigator,languages=_navigator2.languages;var currencies=[];languages.forEach(function(language){var _splitLanguageTag3=splitLanguageTag(language),countryCode=_splitLanguageTag3.countryCode;if(countryCode){var currency=_constants.CURRENCIES[ensureCountryCode(countryCode)];if(currencies.indexOf(currency)===-1){currencies.push(currency);}}});if(currencies.length===0){currencies.push("USD");}return currencies;}function getLocales(){var _navigator3=navigator,languages=_navigator3.languages;var countryCode=getCountry();var cache=[];var locales=[];languages.forEach(function(language){var locale=convertLanguageTagToLocale(language,countryCode);if(cache.indexOf(locale.languageTag)===-1){locales.push(locale);cache.push(locale.languageTag);}});return locales;}function getNumberFormatSettings(){var _getCurrentLocale=getCurrentLocale(),languageTag=_getCurrentLocale.languageTag;var formatter=new Intl.NumberFormat(languageTag);var separators=(0,_toConsumableArray2.default)(formatter.format(1000000.1).replace(/\d/g,""));return{decimalSeparator:separators[separators.length-1],groupingSeparator:separators[0]};}function getTemperatureUnit(){return _constants.USES_FAHRENHEIT.includes(getCountry())?"fahrenheit":"celsius";}function getTimeZone(){var _getCurrentLocale2=getCurrentLocale(),languageTag=_getCurrentLocale2.languageTag;var formatter=new Intl.DateTimeFormat(languageTag,{hour:"numeric"});return formatter.resolvedOptions().timeZone||"Etc/UTC";}function uses24HourClock(){var _getCurrentLocale3=getCurrentLocale(),languageTag=_getCurrentLocale3.languageTag;var formatter=new Intl.DateTimeFormat(languageTag,{hour:"numeric"});return!formatter.format(new Date(2000,0,1,20)).match(/am|pm/i);}function usesMetricSystem(){return!_constants.USES_IMPERIAL.includes(getCountry());}function usesAutoDateAndTime(){}function usesAutoTimeZone(){}var handlers=new Set();exports.handlers=handlers;if(canUseDOM){window.addEventListener("languagechange",function(){handlers.forEach(function(handler){return handler();});});}
//# sourceMappingURL=module.web.js.map