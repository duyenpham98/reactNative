{"version":3,"sources":["index.js"],"names":["logUnknownEvent","type","console","error","getPartialTag","languageCode","scriptCode","addEventListener","handler","handlers","has","add","removeEventListener","delete","findBestAvailableLanguage","languageTags","locales","i","length","currentLocale","languageTag","isRTL","includes","partial","next"],"mappings":"s+CAEA,gCAiCA,QAASA,CAAAA,eAAT,CAAyBC,IAAzB,CAAuC,CACrCC,OAAO,CAACC,KAAR,KAAmBF,IAAnB,iDACD,CACD,QAASG,CAAAA,aAAT,MAA6D,IAApCC,CAAAA,YAAoC,MAApCA,YAAoC,CAAtBC,UAAsB,MAAtBA,UAAsB,CAC3D,MAAOD,CAAAA,YAAY,EAAIC,UAAU,CAAG,IAAMA,UAAT,CAAsB,EAApC,CAAnB,CACD,CAEM,QAASC,CAAAA,gBAAT,CACLN,IADK,CAELO,OAFK,CAGC,CACN,GAAIP,IAAI,GAAK,QAAb,CAAuB,CACrBD,eAAe,CAACC,IAAD,CAAf,CACD,CAFD,IAEO,IAAI,CAACQ,iBAASC,GAAT,CAAaF,OAAb,CAAL,CAA4B,CACjCC,iBAASE,GAAT,CAAaH,OAAb,EACD,CACF,CAEM,QAASI,CAAAA,mBAAT,CACLX,IADK,CAELO,OAFK,CAGC,CACN,GAAIP,IAAI,GAAK,QAAb,CAAuB,CACrBD,eAAe,CAACC,IAAD,CAAf,CACD,CAFD,IAEO,IAAIQ,iBAASC,GAAT,CAAaF,OAAb,CAAJ,CAA2B,CAChCC,iBAASI,MAAT,CAAgBL,OAAhB,EACD,CACF,CAEM,QAASM,CAAAA,yBAAT,CACLC,YADK,CAKG,CACR,GAAMC,CAAAA,OAAO,CAAG,wBAAhB,CAEA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,OAAO,CAACE,MAA5B,CAAoCD,CAAC,EAArC,CAAyC,CACvC,GAAME,CAAAA,aAAa,CAAGH,OAAO,CAACC,CAAD,CAA7B,CADuC,GAE/BG,CAAAA,WAF+B,CAEMD,aAFN,CAE/BC,WAF+B,CAElBf,YAFkB,CAEMc,aAFN,CAElBd,YAFkB,CAEJgB,KAFI,CAEMF,aAFN,CAEJE,KAFI,CAIvC,GAAIN,YAAY,CAACO,QAAb,CAAsBF,WAAtB,CAAJ,CAAwC,CACtC,MAAO,CAAEA,WAAW,CAAXA,WAAF,CAAeC,KAAK,CAALA,KAAf,CAAP,CACD,CAED,GAAME,CAAAA,OAAO,CAAGnB,aAAa,CAACe,aAAD,CAA7B,CACA,GAAMK,CAAAA,IAAI,CAAGR,OAAO,CAACC,CAAC,CAAG,CAAL,CAApB,CAEA,GACE,CAAC,CAACO,IAAD,EAASD,OAAO,GAAKnB,aAAa,CAACoB,IAAD,CAAnC,GACAT,YAAY,CAACO,QAAb,CAAsBC,OAAtB,CAFF,CAGE,CACA,MAAO,CAAEH,WAAW,CAAEG,OAAf,CAAwBF,KAAK,CAALA,KAAxB,CAAP,CACD,CAED,GACE,CAAC,CAACG,IAAD,EAASnB,YAAY,GAAKmB,IAAI,CAACnB,YAAhC,GACAU,YAAY,CAACO,QAAb,CAAsBjB,YAAtB,CAFF,CAGE,CACA,MAAO,CAAEe,WAAW,CAAEf,YAAf,CAA6BgB,KAAK,CAALA,KAA7B,CAAP,CACD,CACF,CACF","sourcesContent":["// @flow\n\nimport { getLocales, handlers } from \"./module\";\n\nimport type {\n  Calendar,\n  Locale,\n  LocalizationEvent,\n  NumberFormatSettings,\n  Option,\n  TemperatureUnit,\n} from \"./types\";\n\nexport type {\n  Calendar,\n  Locale,\n  LocalizationEvent,\n  NumberFormatSettings,\n  TemperatureUnit,\n} from \"./types\";\n\nexport {\n  getCalendar,\n  getCountry,\n  getCurrencies,\n  getLocales,\n  getNumberFormatSettings,\n  getTemperatureUnit,\n  getTimeZone,\n  uses24HourClock,\n  usesMetricSystem,\n  usesAutoDateAndTime,\n  usesAutoTimeZone,\n} from \"./module\";\n\nfunction logUnknownEvent(type: string) {\n  console.error(`\\`${type}\\` is not a valid react-native-localize event`);\n}\nfunction getPartialTag({ languageCode, scriptCode }: Locale) {\n  return languageCode + (scriptCode ? \"-\" + scriptCode : \"\");\n}\n\nexport function addEventListener(\n  type: LocalizationEvent,\n  handler: Function,\n): void {\n  if (type !== \"change\") {\n    logUnknownEvent(type);\n  } else if (!handlers.has(handler)) {\n    handlers.add(handler);\n  }\n}\n\nexport function removeEventListener(\n  type: LocalizationEvent,\n  handler: Function,\n): void {\n  if (type !== \"change\") {\n    logUnknownEvent(type);\n  } else if (handlers.has(handler)) {\n    handlers.delete(handler);\n  }\n}\n\nexport function findBestAvailableLanguage(\n  languageTags: string[],\n): {|\n  languageTag: string,\n  isRTL: boolean,\n|} | void {\n  const locales = getLocales();\n\n  for (let i = 0; i < locales.length; i++) {\n    const currentLocale = locales[i];\n    const { languageTag, languageCode, isRTL } = currentLocale;\n\n    if (languageTags.includes(languageTag)) {\n      return { languageTag, isRTL };\n    }\n\n    const partial = getPartialTag(currentLocale);\n    const next = locales[i + 1];\n\n    if (\n      (!next || partial !== getPartialTag(next)) &&\n      languageTags.includes(partial)\n    ) {\n      return { languageTag: partial, isRTL };\n    }\n\n    if (\n      (!next || languageCode !== next.languageCode) &&\n      languageTags.includes(languageCode)\n    ) {\n      return { languageTag: languageCode, isRTL };\n    }\n  }\n}\n"]}